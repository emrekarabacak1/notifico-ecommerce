@model IEnumerable<Notifico.Models.Order>
@{
    ViewData["Title"] = "Siparişlerim";
    var tr = new System.Globalization.CultureInfo("tr-TR");
    string GetStatusBadge(Notifico.Models.OrderStatus status) => status switch
    {
        Notifico.Models.OrderStatus.Beklemede => "<span class='badge rounded-pill bg-secondary'>Beklemede</span>",
        Notifico.Models.OrderStatus.Onaylandı => "<span class='badge rounded-pill bg-info text-dark'>Onaylandı</span>",
        Notifico.Models.OrderStatus.KargoyaVerildi => "<span class='badge rounded-pill bg-warning text-dark'>Kargoya Verildi</span>",
        Notifico.Models.OrderStatus.TeslimEdildi => "<span class='badge rounded-pill bg-success'>Teslim Edildi</span>",
        Notifico.Models.OrderStatus.IptalEdildi => "<span class='badge rounded-pill bg-danger'>İptal Edildi</span>",
        _ => $"<span class='badge rounded-pill bg-light text-dark'>{status}</span>"
    };
}

<style>
    .orders-card-bg {
        background: #fff;
        border-radius: 1.1rem;
        box-shadow: 0 2px 22px 0 rgba(70,110,200,0.09);
        padding: 1.7rem 2.1rem 1.3rem 2.1rem;
        margin: 0 auto;
        max-width: 1000px;
        margin-bottom: 2.1rem;
        border: 1.2px solid #e3e9f6;
    }

    .orders-title {
        font-size: 2.1rem;
        font-weight: 800;
        color: #1a255e;
        margin-bottom: 1.5rem;
        text-align: left;
        letter-spacing: -0.01em;
    }

    .orders-table th {
        font-weight: 800;
        color: #37446d;
        background: #f7fafd !important;
        border-bottom: 2.3px solid #e4eafd !important;
    }

    .orders-table tr {
        border-bottom: 1.2px solid #f1f3fa;
        transition: background 0.13s;
    }

        .orders-table tr:hover {
            background: #f6faff;
        }

    .orders-table td, .orders-table th {
        vertical-align: middle !important;
        padding: 0.93rem 1.08rem !important;
        border: none;
        font-size: 1.07rem;
    }

    .orders-table .btn {
        border-radius: 1.7rem !important;
        padding: 0.46rem 1.3rem !important;
        font-size: 1.01rem !important;
        font-weight: 700;
    }

    .orders-table .badge {
        font-size: 1.03rem;
        padding: 0.58em 1.12em;
        font-weight: 600;
    }

    media (max-width: 900px) {
        .orders-card-bg

    {
        padding: 1.2rem 0.3rem;
    }

    .orders-title {
        font-size: 1.3rem;
    }

    .orders-table th, .orders-table td {
        font-size: 0.96rem;
        padding: 0.55rem 0.35rem !important;
    }

    }
</style>

<div class="orders-card-bg">
    <div class="orders-title">Siparişlerim</div>

    @if (Model == null || !Model.Any())
    {
        <div class="alert alert-info text-center py-4">
            <b>Henüz hiç siparişiniz yok.</b><br>
            <a href="@Url.Action("Index", "Product")" class="btn btn-outline-primary mt-2">Ürünlere Göz At</a>
        </div>
    }
    else
    {
        <div class="table-responsive">
            <table class="table orders-table align-middle mb-0">
                <thead>
                    <tr>
                        <th>Sipariş No</th>
                        <th>Tarih</th>
                        <th>Tutar</th>
                        <th>Adet</th>
                        <th>Durum</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var order in Model)
                    {
                        <tr>
                            <td>#@order.Id</td>
                            <td>@order.OrderDate.ToLocalTime().ToString("dd.MM.yyyy HH:mm")</td>
                            <td>@order.TotalAmount.ToString("C", tr)</td>
                            <td>@(order.OrderItems?.Sum(x => x.Quantity) ?? 0)</td>
                            <td>
                                @Html.Raw(GetStatusBadge(order.Status))
                            </td>
                            <td>
                                <a asp-action="OrderDetail" asp-route-id="@order.Id" class="btn btn-primary btn-sm">
                                    Detay
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
</div>
